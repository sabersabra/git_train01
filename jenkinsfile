pipeline {
    agent any
    environment {
        imageName = "sabersabra/hello-nginx"
    }
    stages {
        stage("Prepare"){
            steps {
                echo "Hello World"
            }
        
        }
        stage("Check version"){
            steps {
                sh "docker --version"
            }
        }
        stage("deploy"){
            steps {
                sshagent (credentials: ['zabbix-srv']) {
                    sh "ssh root@10.6.3.101 echo Hello World"
                    //sh 'ssh -o StrictHostKeyChecking=no -l cloudbees 167.99.237.229 uname -a'
                    //sh "ssh -i private.key core@167.99.237.229 docker pull ${env.imageName}"
                }
            }
        }
        //stage("push image"){
            //steps {
                // sh "docker login -u sabersabra -p Orlion@11"
                // sh "docker push ${env.imageName}"
            //}
       // }
    }
}